# üéØ –ê–Ω–∞–ª–∏–∑ Feature Flags –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

## üìä **–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –§–õ–ê–ì–û–í**

### ‚úÖ **–í–ö–õ–Æ–ß–ï–ù–´ (—Ö–æ—Ä–æ—à–æ –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏):**
- `use_factory_normalizer` ‚úÖ - Fast normalization
- `enable_ascii_fastpath` ‚úÖ - ASCII optimization
- `morphology_custom_rules_first` ‚úÖ - Custom rules priority
- `enable_ac_tier0` ‚úÖ - AC exact patterns
- `enable_vector_fallback` ‚úÖ - Vector search fallback
- `enable_nameparser_en` ‚úÖ - English name parsing
- `enable_en_nicknames` ‚úÖ - English nicknames
- `enable_enhanced_diminutives` ‚úÖ - Enhanced diminutives
- `enforce_nominative` ‚úÖ - Nominative case enforcement
- `preserve_feminine_surnames` ‚úÖ - Feminine surname preservation

### ‚ùå **–í–´–ö–õ–Æ–ß–ï–ù–´ (—Å–Ω–∏–∂–∞—é—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å):**

#### üî¥ **–ö–†–ò–¢–ò–ß–ù–´–ï –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏:**
- `ENABLE_SEARCH` ‚ùå ‚Üí `true` (Hybrid search - –æ—Å–Ω–æ–≤–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏!)
- `ENABLE_VARIANTS` ‚ùå ‚Üí `true` (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–º–µ–Ω)
- `ENABLE_EMBEDDINGS` ‚ùå ‚Üí `true` (–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫)

#### üü° **–í–ê–ñ–ù–´–ï –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞:**
- `PRIORITIZE_QUALITY` ‚ùå ‚Üí `true` (–ö–∞—á–µ—Å—Ç–≤–æ > —Å–∫–æ—Ä–æ—Å—Ç—å)
- `ENABLE_SPACY_NER` ‚ùå ‚Üí `true` (Named Entity Recognition)
- `ENABLE_FSM_TUNED_ROLES` ‚ùå ‚Üí `true` (–¢–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π)

#### üü¢ **–ü–û–õ–ï–ó–ù–´–ï –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏:**
- `ENABLE_ENHANCED_GENDER_RULES` ‚ùå ‚Üí `true` (–£–ª—É—á—à–µ–Ω–Ω—ã–µ gender –ø—Ä–∞–≤–∏–ª–∞)
- `PRESERVE_FEMININE_SUFFIX_UK` ‚ùå ‚Üí `true` (–£–∫—Ä–∞–∏–Ω—Å–∫–∏–µ —Å—É—Ñ—Ñ–∏–∫—Å—ã)
- `FIX_INITIALS_DOUBLE_DOT` ‚ùå ‚Üí `true` (–ò.. ‚Üí –ò.)
- `PRESERVE_HYPHENATED_CASE` ‚ùå ‚Üí `true` (–ü–µ—Ç—Ä–æ–≤–∞-–°–∏–¥–æ—Ä–æ–≤–∞)
- `STRICT_STOPWORDS` ‚ùå ‚Üí `true` (–°—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- `DIMINUTIVES_ALLOW_CROSS_LANG` ‚ùå ‚Üí `true` (–ö—Ä–æ—Å—Å-—è–∑—ã–∫–æ–≤—ã–µ)

## üöÄ **3 –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò –°–û–ó–î–ê–ù–´:**

### 1. **env.production.maximum_performance**
**–¶–µ–ª—å: 100+ RPS**
```
‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å: ~125 RPS, P95 < 100ms
‚ö†Ô∏è –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: –ë–∞–∑–æ–≤–∞—è (–æ—Ç–∫–ª—é—á–µ–Ω—ã variants, embeddings, NER)
```

### 2. **env.production.optimal**
**–¶–µ–ª—å: –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞**
```
‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å: ~80-100 RPS
‚úÖ –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: –•–æ—Ä–æ—à–∞—è (–≤–∫–ª—é—á–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏)
```

### 3. **env.production.maximum_relevancy** *(–ù–û–í–ê–Ø)*
**–¶–µ–ª—å: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å**
```
‚ö†Ô∏è –°–∫–æ—Ä–æ—Å—Ç—å: ~50-70 RPS
üèÜ –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø (–≤—Å–µ —Ñ–∏—á–∏ –≤–∫–ª—é—á–µ–Ω—ã)
```

## üìã **–ö–õ–Æ–ß–ï–í–´–ï –û–¢–õ–ò–ß–ò–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ô:**

| –§–ª–∞–≥ | Performance | Optimal | Relevancy | –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å |
|------|-------------|---------|-----------|--------------------------|
| `ENABLE_SEARCH` | ‚úÖ | ‚úÖ | ‚úÖ | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| `ENABLE_VARIANTS` | ‚ùå | ‚ùå | ‚úÖ | üü° –í–∞–∂–Ω–æ |
| `ENABLE_EMBEDDINGS` | ‚ùå | ‚ùå | ‚úÖ | üü° –í–∞–∂–Ω–æ |
| `ENABLE_SPACY_NER` | ‚ùå | ‚ùå | ‚úÖ | üü° –í–∞–∂–Ω–æ |
| `PRIORITIZE_QUALITY` | ‚ùå | ‚ùå | ‚úÖ | üü° –í–∞–∂–Ω–æ |
| `ENABLE_FSM_TUNED_ROLES` | ‚ùå | ‚ùå | ‚úÖ | üü¢ –ü–æ–ª–µ–∑–Ω–æ |
| `ASCII_FASTPATH` | ‚úÖ | ‚úÖ | ‚ùå | üü¢ –ö–∞—á–µ—Å—Ç–≤–æ vs —Å–∫–æ—Ä–æ—Å—Ç—å |
| `STRICT_STOPWORDS` | ‚ùå | ‚ùå | ‚úÖ | üü¢ –ü–æ–ª–µ–∑–Ω–æ |

## üéØ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –í–´–ë–û–†–£:**

### **–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–µ–π:**
```bash
cp env.production.maximum_relevancy env.production
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üèÜ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –§–ò–û
- üèÜ Hybrid search (AC + Vector + Semantic)
- üèÜ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω–∏—è
- üèÜ NER –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- üèÜ Enhanced gender –∏ diminutives –ø—Ä–∞–≤–∏–ª–∞

**–ö–æ–º–ø—Ä–æ–º–∏—Å—Å:**
- ‚ö†Ô∏è –°–∫–æ—Ä–æ—Å—Ç—å: ~50-70 RPS (–≤—Å–µ –µ—â–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –º–Ω–æ–≥–∏—Ö –∑–∞–¥–∞—á)
- ‚ö†Ô∏è –ë–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤: 6GB RAM, –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è CPU –∑–∞–≥—Ä—É–∑–∫–∞

### **–î–ª—è –±–∞–ª–∞–Ω—Å–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞:**
```bash
cp env.production.optimal env.production
```

### **–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏:**
```bash
cp env.production.maximum_performance env.production
```

## üîß **–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ü–û –°–¶–ï–ù–ê–†–ò–Ø–ú:**

### **–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø–ª–∞—Ç–µ–∂–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Relevancy):**
- –ö—Ä–∏—Ç–∏—á–Ω–æ: —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –§–ò–û
- –ö—Ä–∏—Ç–∏—á–Ω–æ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–º–µ–Ω
- –î–æ–ø—É—Å—Ç–∏–º–æ: 50-70 RPS (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –±–∞–Ω–∫–æ–≤)

### **–í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ API (Performance):**
- –ö—Ä–∏—Ç–∏—á–Ω–æ: >100 RPS
- –î–æ–ø—É—Å—Ç–∏–º–æ: –±–∞–∑–æ–≤–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- –ü–æ–¥—Ö–æ–¥–∏—Ç: –ø—Ä–æ—Å—Ç—ã–µ –§–ò–û, –±—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (Optimal):**
- –ë–∞–ª–∞–Ω—Å –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤
- –•–æ—Ä–æ—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å + –ø—Ä–∏–µ–º–ª–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

## üìä **–û–ñ–ò–î–ê–ï–ú–ê–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:**

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | RPS | P95 Latency | Accuracy | Memory | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------------|-----|-------------|----------|--------|--------------|
| Performance | 125+ | <100ms | 85% | 3GB | –í—ã—Å–æ–∫–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ |
| Optimal | 80-100 | <150ms | 90% | 4GB | **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** |
| Relevancy | 50-70 | <300ms | 95%+ | 6GB | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ |

## üéØ **–§–ò–ù–ê–õ–¨–ù–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:**

**–î–ª—è production –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
```bash
env.production.optimal
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- ‚úÖ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å: 80-100 RPS
- ‚úÖ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ: 90%+ accuracy
- ‚úÖ –†–∞–∑—É–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã: 4GB RAM
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏ –≤–∫–ª—é—á–µ–Ω—ã
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å